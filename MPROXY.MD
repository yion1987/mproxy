# MPROXY代理程序开发需求
1.使用python tkinter
2.界面包含启动、停止按钮，窗口最小化按钮可用，禁用最大化，关闭按钮
3.界面包含一个黑色的终端日志窗口，使用标准log模块输出日志
4.使用SOCKET5、HTTP代理协议
5.支持设置代理端口、监听端口等参数
6.使用pyinstaller打包成可执行文件
7.绘制一个简单的图标，用于程序图标

---

## 使用说明

- 运行：在项目根目录执行 `python main.py` 启动图形界面。
- 界面参数：
  - `监听地址`：默认 `0.0.0.0`。
  - `监听端口`：默认 `1080`。
  - `上游代理地址/端口`（可选）：如需级联到上游 SOCKS5 代理，则填入；不填则直接连接目标地址。
  - `连接超时(秒)`：默认 `10`。
- 控制：点击 `启动` 开始服务，`停止` 关闭服务；窗口禁用最大化、支持最小化与关闭。
- 日志窗口：黑色背景的终端样式，使用标准 `logging` 输出。

## 打包为可执行文件（Windows）

1. 确保已创建虚拟环境并安装依赖（脚本会自动安装 pyinstaller）：
2. 在项目根目录执行：
   - `powershell -ExecutionPolicy Bypass -File scripts/build.ps1 -Name mproxy`
3. 说明：
   - 脚本会生成 `assets/icon.ico`（简单图标），并使用 `pyinstaller` 打包。
   - 生成的可执行文件位于 `dist/mproxy/` 目录。

## 备注

- 当前实现支持 SOCKS5 `CONNECT` 命令，IPv4/域名/IPv6 地址类型。
- 如填写上游代理地址/端口，将通过上游 SOCKS5（无认证）进行级联转发。